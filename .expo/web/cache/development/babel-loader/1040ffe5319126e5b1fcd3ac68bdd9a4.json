{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState, useCallback, useContext } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport { useFocusEffect } from \"@react-navigation/native\";\nimport GlobalVars from \"../../global/globalVars\";\nimport StoreContext from \"../../helpers/globalStates\";\nimport recoveringStateLocation from \"../../utils/useGPS\";\nimport useModal from \"../../utils/useModal\";\nimport StatusBarComponent from \"../../components/atoms/StatusBar\";\nimport InputSearch from \"../../components/molecules/InputSearch\";\nimport ProductsGrid from \"../../components/organisms/ProductsGrid\";\nimport MapViewComponent from \"../../components/organisms/MapView\";\nimport Header from \"../../components/organisms/Header\";\nimport CategoriesCarouselTabs from \"../../components/organisms/CategoriesTabs\";\nimport ScrollView from \"../../components/templates/ScrollView\";\nimport WrappingViews from \"../../components/templates/WrappingViews\";\nimport Styles from \"./style\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar styles = Styles;\n\nvar CategoriesScreen = function CategoriesScreen(_ref) {\n  var _route$params;\n\n  var route = _ref.route,\n      navigation = _ref.navigation;\n  var itemCat = (route == null ? void 0 : (_route$params = route.params) == null ? void 0 : _route$params.itemCat) || null;\n\n  var _useContext = useContext(StoreContext.SecurityContext),\n      _jwt = _useContext._jwt;\n\n  var _useContext2 = useContext(StoreContext.UserContext),\n      user = _useContext2.user;\n\n  var _useModal = useModal(),\n      isOpenWelcome = _useModal.isShowing,\n      showWelcome = _useModal.toggle;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      showTotalMenu = _useState2[0],\n      _setShowTotalMenu = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      q = _useState4[0],\n      setQuery = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      ToRandomDispatch = _useState6[0],\n      setToRandomDispatch = _useState6[1];\n\n  var _useState7 = useState(itemCat),\n      _useState8 = _slicedToArray(_useState7, 2),\n      selected = _useState8[0],\n      setSelected = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      gps = _useState10[0],\n      setGps = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      filterText = _useState12[0],\n      setFilterText = _useState12[1];\n\n  useEffect(function () {}, []);\n  useFocusEffect(useCallback(function () {\n    BackHandlerProcess();\n    getRandomNumberDispatch();\n    captureGps();\n  }, []));\n\n  var getRandomNumberDispatch = function getRandomNumberDispatch() {\n    var attrTemp = Math.random();\n    setToRandomDispatch(attrTemp);\n  };\n\n  var BackHandlerProcess = function BackHandlerProcess() {\n    var backAction = function backAction() {\n      navigation.goBack();\n      return true;\n    };\n\n    var backHandler = BackHandler.addEventListener(\"hardwareBackPress\", backAction);\n    return function () {\n      return backHandler.remove();\n    };\n  };\n\n  var captureGps = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var _recover, _recover$coords, _recover2, _recover2$coords;\n\n      var recover = yield recoveringStateLocation();\n\n      while (recover === \"error\" || !recover) {\n        recover = yield recoveringStateLocation();\n      }\n\n      setGps({\n        latitude: (_recover = recover) == null ? void 0 : (_recover$coords = _recover.coords) == null ? void 0 : _recover$coords.latitude,\n        longitude: (_recover2 = recover) == null ? void 0 : (_recover2$coords = _recover2.coords) == null ? void 0 : _recover2$coords.longitude\n      });\n    });\n\n    return function captureGps() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var changeSelection = function changeSelection(idCat) {\n    setSelected(idCat);\n  };\n\n  return _jsxs(WrappingViews, {\n    children: [_jsx(StatusBarComponent, {}), _jsx(Header, {\n      navigation: navigation,\n      openTotal: showTotalMenu,\n      query: q,\n      setQuery: setQuery,\n      user: user,\n      setShowTotalMenu: function setShowTotalMenu() {\n        return _setShowTotalMenu(!showTotalMenu);\n      },\n      _jwt: _jwt,\n      ToRandomDispatch: ToRandomDispatch\n    }), _jsxs(ScrollView, {\n      style: styles.scrolling,\n      contentContainerStyle: styles.wrapScrollView,\n      colorScrollBar: GlobalVars.orange,\n      children: [_jsx(View, {\n        style: styles.mapView,\n        children: gps && _jsx(MapViewComponent, {\n          coords: gps || null,\n          onChangeCoords: setGps\n        })\n      }), _jsx(CategoriesCarouselTabs, {\n        jwt: _jwt,\n        selected: selected,\n        changeSelection: changeSelection\n      }), _jsx(View, {\n        style: styles.searchView,\n        children: _jsx(InputSearch, {\n          label: \"Buscar productos\",\n          iconName: filterText ? \"x\" : \"search\",\n          textvariable: filterText || \"\",\n          setValue: function setValue(val) {\n            return setFilterText(val);\n          },\n          bgBlue: true\n        })\n      }), _jsx(View, {\n        style: styles.productsContainer,\n        children: _jsx(ProductsGrid, {\n          gps: gps,\n          jwt: _jwt,\n          filterText: filterText,\n          selectedCategory: selected,\n          title: \"Todos los resultados\",\n          allActive: true,\n          showTitle: true,\n          activeNears: true\n        })\n      })]\n    })]\n  });\n};\n\nexport default CategoriesScreen;","map":{"version":3,"names":["React","useEffect","useState","useCallback","useContext","useFocusEffect","GlobalVars","StoreContext","recoveringStateLocation","useModal","StatusBarComponent","InputSearch","ProductsGrid","MapViewComponent","Header","CategoriesCarouselTabs","ScrollView","WrappingViews","Styles","styles","CategoriesScreen","route","navigation","itemCat","params","SecurityContext","_jwt","UserContext","user","isOpenWelcome","isShowing","showWelcome","toggle","showTotalMenu","setShowTotalMenu","q","setQuery","ToRandomDispatch","setToRandomDispatch","selected","setSelected","gps","setGps","filterText","setFilterText","BackHandlerProcess","getRandomNumberDispatch","captureGps","attrTemp","Math","random","backAction","goBack","backHandler","BackHandler","addEventListener","remove","recover","latitude","coords","longitude","changeSelection","idCat","scrolling","wrapScrollView","orange","mapView","searchView","val","productsContainer"],"sources":["/Users/andresfelipepinillameneses/Documents/John 2/front/src/screens/Categories/index.js"],"sourcesContent":["import React, { useEffect, useState, useCallback, useContext } from \"react\";\n\nimport { View, BackHandler } from \"react-native\";\n\nimport { useFocusEffect } from \"@react-navigation/native\";\n\nimport GlobalVars from \"../../global/globalVars\";\n\nimport StoreContext from \"../../helpers/globalStates\";\n\nimport recoveringStateLocation from \"../../utils/useGPS\";\n\nimport useModal from \"../../utils/useModal\";\n\n/** Import Componentes Custom */\nimport StatusBarComponent from \"../../components/atoms/StatusBar\";\nimport InputSearch from \"../../components/molecules/InputSearch\";\nimport ProductsGrid from \"../../components/organisms/ProductsGrid\";\nimport MapViewComponent from \"../../components/organisms/MapView\";\nimport Header from \"../../components/organisms/Header\";\nimport CategoriesCarouselTabs from \"../../components/organisms/CategoriesTabs\";\nimport ScrollView from \"../../components/templates/ScrollView\";\nimport WrappingViews from \"../../components/templates/WrappingViews\";\n\n/** Styles */\nimport Styles from \"./style\";\n\nconst styles = Styles;\nconst CategoriesScreen = ({ route, navigation }) => {\n  const itemCat = route?.params?.itemCat || null;\n\n  const { _jwt } = useContext(StoreContext.SecurityContext);\n  const { user } = useContext(StoreContext.UserContext);\n\n  const { isShowing: isOpenWelcome, toggle: showWelcome } = useModal();\n\n  const [showTotalMenu, setShowTotalMenu] = useState(true);\n  const [q, setQuery] = useState(\"\");\n\n  const [ToRandomDispatch, setToRandomDispatch] = useState(null);\n\n  const [selected, setSelected] = useState(itemCat);\n\n  const [gps, setGps] = useState(null);\n  const [filterText, setFilterText] = useState(\"\");\n\n  useEffect(() => {}, []);\n\n  useFocusEffect(\n    useCallback(() => {\n      /** Backhandler process Android -> back button */\n      BackHandlerProcess();\n\n      getRandomNumberDispatch();\n\n      captureGps();\n    }, [])\n  );\n\n  const getRandomNumberDispatch = () => {\n    // random vals process for generate token for wish\n    const attrTemp = Math.random();\n    setToRandomDispatch(attrTemp);\n  };\n\n  const BackHandlerProcess = () => {\n    /** Android no return Login */\n    const backAction = () => {\n      navigation.goBack();\n      return true;\n    };\n    const backHandler = BackHandler.addEventListener(\n      \"hardwareBackPress\",\n      backAction\n    );\n    return () => backHandler.remove();\n  };\n\n  const captureGps = async () => {\n    let recover = await recoveringStateLocation();\n    while (recover === \"error\" || !recover) {\n      recover = await recoveringStateLocation();\n    }\n    setGps({\n      latitude: recover?.coords?.latitude,\n      longitude: recover?.coords?.longitude,\n    });\n  };\n\n  const changeSelection = (idCat) => {\n    setSelected(idCat);\n  };\n\n  return (\n    <WrappingViews>\n      <StatusBarComponent />\n      <Header\n        navigation={navigation}\n        openTotal={showTotalMenu}\n        query={q}\n        setQuery={setQuery}\n        user={user}\n        setShowTotalMenu={() => setShowTotalMenu(!showTotalMenu)}\n        _jwt={_jwt}\n        ToRandomDispatch={ToRandomDispatch}\n      />\n\n      <ScrollView\n        style={styles.scrolling}\n        contentContainerStyle={styles.wrapScrollView}\n        colorScrollBar={GlobalVars.orange}\n      >\n        <View style={styles.mapView}>\n          {gps && (\n            <MapViewComponent coords={gps || null} onChangeCoords={setGps} />\n          )}\n        </View>\n\n        <CategoriesCarouselTabs\n          jwt={_jwt}\n          selected={selected}\n          changeSelection={changeSelection}\n        />\n\n        <View style={styles.searchView}>\n          <InputSearch\n            label=\"Buscar productos\"\n            iconName={filterText ? \"x\" : \"search\"}\n            textvariable={filterText || \"\"}\n            setValue={(val) => setFilterText(val)}\n            bgBlue\n          />\n        </View>\n\n        <View style={styles.productsContainer}>\n          <ProductsGrid\n            gps={gps}\n            jwt={_jwt}\n            filterText={filterText}\n            selectedCategory={selected}\n            title={`Todos los resultados`}\n            allActive\n            showTitle\n            activeNears\n          />\n        </View>\n      </ScrollView>\n    </WrappingViews>\n  );\n};\n\nexport default CategoriesScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}