{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"isEntrepreneurUpdate\", \"_jwt\", \"entrepreneur\"];\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { Entypo } from \"@expo/vector-icons\";\nimport GlobalVars from \"../../../global/globalVars\";\nimport { GET_CATEGORIES } from \"../../../mock/categories\";\nimport updateDataEntrepreneur from \"../../../helpers/updateDataEntrepreneur\";\nimport CardSelectable from \"./cardSelectable\";\nimport LabelTextComponent from \"../../atoms/LabelText\";\nimport ButtonComponent from \"../../atoms/ButtonComponent\";\nimport ScrollView from \"../../templates/ScrollView\";\nimport Styles from \"./style\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar styles = Styles;\n\nvar PickerCategories = function PickerCategories(_ref) {\n  var _ref$isEntrepreneurUp = _ref.isEntrepreneurUpdate,\n      isEntrepreneurUpdate = _ref$isEntrepreneurUp === void 0 ? false : _ref$isEntrepreneurUp,\n      _ref$_jwt = _ref._jwt,\n      _jwt = _ref$_jwt === void 0 ? null : _ref$_jwt,\n      _ref$entrepreneur = _ref.entrepreneur,\n      entrepreneur = _ref$entrepreneur === void 0 ? null : _ref$entrepreneur,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var onClose = props.onClose,\n      selectCat = props.selectCat,\n      setCategorySelected = props.setCategorySelected;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      errMsg = _useState2[0],\n      setErrMsg = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showErr = _useState4[0],\n      setShowErr = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      categories = _useState8[0],\n      setCategories = _useState8[1];\n\n  var _useState9 = useState(selectCat),\n      _useState10 = _slicedToArray(_useState9, 2),\n      currentCat = _useState10[0],\n      setCurrentCat = _useState10[1];\n\n  useEffect(function () {\n    onRecoverCategories();\n  }, []);\n\n  var onRecoverCategories = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var res = yield GET_CATEGORIES();\n      setCategories(res);\n    });\n\n    return function onRecoverCategories() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var saveCats = function () {\n    var _ref3 = _asyncToGenerator(function* (param) {\n      yield setLoading(true);\n\n      try {\n        switch (param) {\n          case 1:\n            var dataSend = {\n              id: entrepreneur == null ? void 0 : entrepreneur.id,\n              category: currentCat\n            };\n            var res = yield updateDataEntrepreneur.entrepreneurCategory(dataSend, _jwt);\n\n            if (res) {\n              setCategorySelected(currentCat);\n              setLoading(false);\n              onClose();\n            } else {\n              setLoading(false);\n              setErrMsg(\"No se puedo actualizar el rubro.\");\n              setShowErr(true);\n              setTimeout(function () {\n                setShowErr(false);\n              }, 1200);\n            }\n\n            break;\n\n          case 2:\n            break;\n        }\n      } catch (e) {\n        setLoading(false);\n        setErrMsg(\"No se puedo actualizar el rubro.\");\n        setShowErr(true);\n        setTimeout(function () {\n          setShowErr(false);\n        }, 1200);\n      }\n    });\n\n    return function saveCats(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var optionsCategories = categories.length && categories.map(function (category) {\n    return _jsx(CardSelectable, {\n      category: category,\n      setCurrentCat: setCurrentCat,\n      currentCat: currentCat\n    }, \"category_\" + (category == null ? void 0 : category.id));\n  }) || _jsx(_Fragment, {});\n\n  return _jsxs(View, {\n    style: styles.view,\n    children: [loading || !currentCat ? _jsx(ActivityIndicator, {\n      color: GlobalVars.orange,\n      size: \"large\"\n    }) : _jsx(_Fragment, {}), !loading && currentCat && _jsxs(_Fragment, {\n      children: [_jsx(LabelTextComponent, {\n        text: \"Selecciona Rubro\",\n        color: GlobalVars.blueOpaque,\n        size: 15\n      }), showErr && _jsx(LabelTextComponent, {\n        text: errMsg,\n        color: GlobalVars.googleColor,\n        size: 10\n      }), _jsx(View, {\n        style: styles.containerScroll,\n        children: _jsx(ScrollView, {\n          style: styles.scrolling,\n          contentContainerStyle: styles.wrapScrollView,\n          colorScrollBar: GlobalVars.orange,\n          children: _jsx(TouchableOpacity, {\n            style: styles.gridCats,\n            activeOpacity: 1,\n            children: optionsCategories\n          })\n        })\n      }), showErr && errMsg && _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return setShowErr(false);\n        },\n        children: _jsx(LabelTextComponent, {\n          text: errMsg,\n          color: GlobalVars.googleColor,\n          size: 13\n        })\n      }), currentCat && _jsx(ButtonComponent, {\n        text: \"Guardar\",\n        color: GlobalVars.orange,\n        textColor: GlobalVars.white,\n        Action: function Action() {\n          return isEntrepreneurUpdate ? saveCats(1) : saveCats(2);\n        }\n      }), _jsx(TouchableOpacity, {\n        style: styles.closeIcon,\n        onPress: onClose,\n        children: _jsx(Entypo, {\n          name: \"circle-with-cross\",\n          size: 24,\n          color: GlobalVars.blueOpaque\n        })\n      })]\n    })]\n  });\n};\n\nexport default PickerCategories;","map":{"version":3,"names":["React","useState","useEffect","Entypo","GlobalVars","GET_CATEGORIES","updateDataEntrepreneur","CardSelectable","LabelTextComponent","ButtonComponent","ScrollView","Styles","styles","PickerCategories","isEntrepreneurUpdate","_jwt","entrepreneur","props","onClose","selectCat","setCategorySelected","errMsg","setErrMsg","showErr","setShowErr","loading","setLoading","categories","setCategories","currentCat","setCurrentCat","onRecoverCategories","res","saveCats","param","dataSend","id","category","entrepreneurCategory","setTimeout","e","optionsCategories","length","map","view","orange","blueOpaque","googleColor","containerScroll","scrolling","wrapScrollView","gridCats","white","closeIcon"],"sources":["/Users/andresfelipepinillameneses/Documents/John 2/front/src/components/organisms/ChooseCategoriesEntrepreneur/index.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport { View, TouchableOpacity, ActivityIndicator } from \"react-native\";\n\nimport { Entypo } from \"@expo/vector-icons\";\n\nimport GlobalVars from \"../../../global/globalVars\";\n\nimport { GET_CATEGORIES } from \"../../../mock/categories\";\n\nimport updateDataEntrepreneur from \"../../../helpers/updateDataEntrepreneur\";\n\nimport CardSelectable from \"./cardSelectable\";\nimport LabelTextComponent from \"../../atoms/LabelText\";\nimport ButtonComponent from \"../../atoms/ButtonComponent\";\nimport ScrollView from \"../../templates/ScrollView\";\n\nimport Styles from \"./style\";\n\nconst styles = Styles;\n\nconst PickerCategories = ({\n  isEntrepreneurUpdate = false,\n  _jwt = null,\n  entrepreneur = null,\n  ...props\n}) => {\n  const { onClose, selectCat, setCategorySelected } = props;\n\n  const [errMsg, setErrMsg] = useState(\"\");\n  const [showErr, setShowErr] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const [categories, setCategories] = useState([]);\n\n  const [currentCat, setCurrentCat] = useState(selectCat);\n\n  useEffect(() => {\n    // Data in CMS\n    onRecoverCategories();\n  }, []);\n\n  const onRecoverCategories = async () => {\n    const res = await GET_CATEGORIES();\n    setCategories(res);\n  };\n\n  const saveCats = async (param) => {\n    await setLoading(true);\n    try {\n      switch (param) {\n        case 1:\n          const dataSend = {\n            id: entrepreneur?.id,\n            category: currentCat,\n          };\n          const res = await updateDataEntrepreneur.entrepreneurCategory(\n            dataSend,\n            _jwt\n          );\n          if (res) {\n            setCategorySelected(currentCat);\n            setLoading(false);\n            onClose();\n          } else {\n            setLoading(false);\n            setErrMsg(\"No se puedo actualizar el rubro.\");\n            setShowErr(true);\n            setTimeout(() => {\n              setShowErr(false);\n            }, 1200);\n          }\n\n          break;\n\n        case 2:\n          break;\n      }\n    } catch (e) {\n      setLoading(false);\n      setErrMsg(\"No se puedo actualizar el rubro.\");\n      setShowErr(true);\n      setTimeout(() => {\n        setShowErr(false);\n      }, 1200);\n    }\n  };\n\n  const optionsCategories = (categories.length &&\n    categories.map((category) => {\n      return (\n        <CardSelectable\n          key={\"category_\" + category?.id}\n          category={category}\n          setCurrentCat={setCurrentCat}\n          currentCat={currentCat}\n        />\n      );\n    })) || <></>;\n\n  return (\n    <View style={styles.view}>\n      {loading || !currentCat ? (\n        <ActivityIndicator color={GlobalVars.orange} size=\"large\" />\n      ) : (\n        <></>\n      )}\n      {!loading && currentCat && (\n        <>\n          <LabelTextComponent\n            text=\"Selecciona Rubro\"\n            color={GlobalVars.blueOpaque}\n            size={15}\n          />\n\n          {showErr && (\n            <LabelTextComponent\n              text={errMsg}\n              color={GlobalVars.googleColor}\n              size={10}\n            />\n          )}\n          <View style={styles.containerScroll}>\n            <ScrollView\n              style={styles.scrolling}\n              contentContainerStyle={styles.wrapScrollView}\n              colorScrollBar={GlobalVars.orange}\n            >\n              <TouchableOpacity style={styles.gridCats} activeOpacity={1}>\n                {optionsCategories}\n              </TouchableOpacity>\n            </ScrollView>\n          </View>\n\n          {showErr && errMsg && (\n            <TouchableOpacity onPress={() => setShowErr(false)}>\n              <LabelTextComponent\n                text={errMsg}\n                color={GlobalVars.googleColor}\n                size={13}\n              />\n            </TouchableOpacity>\n          )}\n\n          {currentCat && (\n            <ButtonComponent\n              text=\"Guardar\"\n              color={GlobalVars.orange}\n              textColor={GlobalVars.white}\n              Action={() => (isEntrepreneurUpdate ? saveCats(1) : saveCats(2))}\n            />\n          )}\n\n          <TouchableOpacity style={styles.closeIcon} onPress={onClose}>\n            <Entypo\n              name=\"circle-with-cross\"\n              size={24}\n              color={GlobalVars.blueOpaque}\n            />\n          </TouchableOpacity>\n        </>\n      )}\n    </View>\n  );\n};\n\nexport default PickerCategories;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}