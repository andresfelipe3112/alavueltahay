{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport * as React from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { GET_ALLS_PRODUCTS_CATEGORY, GET_ALLS_PRODUCTS } from \"../../../mock/productsByCategory\";\nimport { GET_ALLS_PRODUCTS_ENTREPRENEUR } from \"../../../mock/productsByEntrepreneur\";\nimport { GET_10_STAR_PRODUCTS_ENTREPRENEUR } from \"../../../mock/productsByEntrepreneurFeatured\";\nimport { shuffleArray } from \"../../../helpers/shuffleArr\";\nimport distancesUtil from \"../../../utils/calculateGPSdistances\";\nimport LabelTextComponent from \"../../atoms/LabelText\";\nimport ProductCard from \"../../molecules/ProductCard\";\nimport GlobalVars from \"../../../global/globalVars\";\nimport Styles from \"./style\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar styles = Styles;\nvar AnimatedScrollView = Animated.createAnimatedComponent(ScrollView);\nvar CATEGORY_ALLS = 9999999;\nexport default function ProductsGrid(_ref) {\n  var _ref$jwt = _ref.jwt,\n      jwt = _ref$jwt === void 0 ? null : _ref$jwt,\n      _ref$selectedCategory = _ref.selectedCategory,\n      selectedCategory = _ref$selectedCategory === void 0 ? null : _ref$selectedCategory,\n      _ref$entrepreneur = _ref.entrepreneur,\n      entrepreneur = _ref$entrepreneur === void 0 ? null : _ref$entrepreneur,\n      _ref$justFeatures = _ref.justFeatures,\n      justFeatures = _ref$justFeatures === void 0 ? false : _ref$justFeatures,\n      _ref$isMyShop = _ref.isMyShop,\n      isMyShop = _ref$isMyShop === void 0 ? false : _ref$isMyShop,\n      _ref$allActive = _ref.allActive,\n      allActive = _ref$allActive === void 0 ? false : _ref$allActive,\n      _ref$filterText = _ref.filterText,\n      filterText = _ref$filterText === void 0 ? \"\" : _ref$filterText,\n      _ref$showTitle = _ref.showTitle,\n      showTitle = _ref$showTitle === void 0 ? false : _ref$showTitle,\n      _ref$title = _ref.title,\n      title = _ref$title === void 0 ? \"\" : _ref$title,\n      _ref$activeNears = _ref.activeNears,\n      activeNears = _ref$activeNears === void 0 ? false : _ref$activeNears,\n      _ref$gps = _ref.gps,\n      gps = _ref$gps === void 0 ? null : _ref$gps,\n      _ref$isSpacing = _ref.isSpacing,\n      isSpacing = _ref$isSpacing === void 0 ? false : _ref$isSpacing;\n  var navigation = useNavigation();\n\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      result = _React$useState2[0],\n      setResult = _React$useState2[1];\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      resultfilter = _React$useState4[0],\n      setResultfilter = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      loading = _React$useState6[0],\n      setLoading = _React$useState6[1];\n\n  var _React$useState7 = React.useState(false),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      empty = _React$useState8[0],\n      setEmpty = _React$useState8[1];\n\n  var _React$useState9 = React.useState([]),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      nearResults = _React$useState10[0],\n      setNearResults = _React$useState10[1];\n\n  React.useEffect(function () {}, []);\n  React.useEffect(function () {\n    var isMount = true;\n\n    if (isMount) {\n      getProducts();\n    }\n\n    return function () {\n      isMount = false;\n    };\n  }, [selectedCategory, entrepreneur]);\n  React.useEffect(function () {\n    var isMountRes = true;\n\n    if (isMountRes) {\n      if (result != null && result.length) {\n        SearchFilter(filterText);\n\n        if (activeNears) {\n          if (searchWaiting) clearTimeout(searchWaiting);\n          var searchWaiting = setTimeout(function () {\n            searchWaiting = null;\n            recoverNearbyPlaces();\n          }, 1500);\n        }\n      } else {\n        setResultfilter([]);\n      }\n    }\n\n    return function () {\n      isMountRes = false;\n    };\n  }, [result]);\n  React.useEffect(function () {\n    var isMounSearch = true;\n\n    if (isMounSearch) {\n      SearchFilter(filterText);\n    }\n\n    return function () {\n      isMounSearch = false;\n    };\n  }, [filterText]);\n\n  var getProducts = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      yield setLoading(true);\n\n      if (entrepreneur && justFeatures) {\n        var res = yield GET_10_STAR_PRODUCTS_ENTREPRENEUR(entrepreneur, jwt);\n\n        if (res && res.length) {\n          setLoading(false);\n          setResult(res);\n          setEmpty(false);\n        } else {\n          setLoading(false);\n          setEmpty(true);\n          setResult([]);\n        }\n      } else if (entrepreneur && !justFeatures) {\n        var _res = yield GET_ALLS_PRODUCTS_ENTREPRENEUR(entrepreneur, jwt);\n\n        if (_res && _res.length) {\n          setLoading(false);\n          setResult(_res);\n          setEmpty(false);\n        } else {\n          setLoading(false);\n          setEmpty(true);\n          setResult([]);\n        }\n      } else if (selectedCategory) {\n        var _res2 = selectedCategory === CATEGORY_ALLS ? yield GET_ALLS_PRODUCTS(jwt) : yield GET_ALLS_PRODUCTS_CATEGORY(selectedCategory, jwt);\n\n        if (_res2 && _res2.length) {\n          setLoading(false);\n          setResult(_res2);\n          setEmpty(false);\n        } else {\n          setLoading(false);\n          setEmpty(true);\n          setResult([]);\n        }\n      } else {\n        var _res3 = yield GET_ALLS_PRODUCTS_ENTREPRENEUR(entrepreneur, jwt);\n\n        if (_res3 && _res3.length) {\n          setLoading(false);\n          setResult(_res3);\n          setEmpty(false);\n        } else {\n          setLoading(false);\n          setEmpty(true);\n          setResult([]);\n        }\n      }\n    });\n\n    return function getProducts() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var SearchFilter = function SearchFilter(textSearch) {\n    if (textSearch) {\n      var newData = result.filter(function (item) {\n        var _item$attributes;\n\n        var itemData = item == null ? void 0 : (_item$attributes = item.attributes) == null ? void 0 : _item$attributes.product.toUpperCase();\n        var textData = textSearch.toUpperCase();\n        return itemData.indexOf(textData) > -1;\n      });\n      setResultfilter(newData);\n    } else {\n      setResultfilter(result);\n    }\n  };\n\n  var recoverNearbyPlaces = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      yield setNearResults([]);\n      var arrTmp = yield Promise.all(result.map(function () {\n        var _ref4 = _asyncToGenerator(function* (element, i) {\n          var _element$attributes, _element$attributes$e, _element$attributes$e2, _element$attributes$e3;\n\n          var res = yield distancesUtil.calculateDistances(gps, element == null ? void 0 : (_element$attributes = element.attributes) == null ? void 0 : (_element$attributes$e = _element$attributes.entrepreneurship) == null ? void 0 : (_element$attributes$e2 = _element$attributes$e.data) == null ? void 0 : (_element$attributes$e3 = _element$attributes$e2.attributes) == null ? void 0 : _element$attributes$e3.gps);\n          var distanceBetween = res / 1000;\n\n          if (distancesUtil.distanceMax >= distanceBetween) {\n            return element;\n          } else {\n            null;\n          }\n        });\n\n        return function (_x, _x2) {\n          return _ref4.apply(this, arguments);\n        };\n      }()));\n      var filtered = arrTmp.filter(function (e) {\n        return e && e !== null;\n      });\n      var newShuffleArr = shuffleArray(filtered);\n      yield setNearResults(newShuffleArr);\n    });\n\n    return function recoverNearbyPlaces() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var cards = resultfilter.map(function (item, i) {\n    if (isMyShop) {\n      return _jsx(ProductCard, {\n        item: item,\n        isMyShop: true\n      }, \"product_item_\" + i);\n    } else {\n      return _jsx(ProductCard, {\n        item: item\n      }, \"product_item_\" + i);\n    }\n  });\n  var ResultsNearToSearch = nearResults.map(function (item, i) {\n    if (i > 3) return _jsx(ProductCard, {\n      item: null\n    }, \"product_item_near_\" + i);\n\n    if (isMyShop) {\n      return _jsx(ProductCard, {\n        item: item,\n        isMyShop: true\n      }, \"product_item_near_\" + i);\n    } else {\n      return _jsx(ProductCard, {\n        item: item\n      }, \"product_item_near_\" + i);\n    }\n  });\n  return _jsx(View, {\n    style: styles.rootView,\n    children: _jsxs(View, {\n      style: styles.viewContainer,\n      children: [loading && _jsx(ActivityIndicator, {\n        style: {\n          alignSelf: \"center\",\n          marginVertical: 30\n        },\n        size: \"large\",\n        color: GlobalVars.orange\n      }), _jsxs(AnimatedScrollView, {\n        style: styles.stylesCarousel,\n        contentContainerStyle: [styles.contentCarousel, {\n          paddingHorizontal: isSpacing ? 10 : 0\n        }],\n        children: [!loading && empty && _jsx(LabelTextComponent, {\n          text: \"Por el momento esta lista est\\xE1 vac\\xEDa.\",\n          color: GlobalVars.textGrayColor,\n          size: 16\n        }), !loading && !empty && nearResults.length && _jsxs(_Fragment, {\n          children: [_jsx(LabelTextComponent, {\n            text: \"Cerca de t\\xED\",\n            color: GlobalVars.textGrayColor,\n            size: 16\n          }), _jsx(View, {\n            style: styles.spacingSections\n          }), _jsx(View, {\n            style: styles.wrapGrid,\n            children: !loading && !empty && nearResults.length && ResultsNearToSearch || _jsx(_Fragment, {})\n          }), _jsx(View, {\n            style: styles.spacingSections\n          })]\n        }) || _jsx(_Fragment, {}), !loading && !empty && showTitle && _jsxs(_Fragment, {\n          children: [_jsx(LabelTextComponent, {\n            text: title,\n            color: GlobalVars.textGrayColor,\n            size: 16\n          }), _jsx(View, {\n            style: styles.spacingSections\n          })]\n        }) || _jsx(_Fragment, {}), _jsx(View, {\n          style: styles.wrapGrid,\n          children: !loading && !empty && cards || _jsx(_Fragment, {})\n        }), !loading && !empty && !allActive && _jsx(TouchableOpacity, {\n          style: styles.viewAll,\n          onPress: function onPress() {\n            return navigation.navigate(\"Products\", {\n              shopID: entrepreneur\n            });\n          },\n          children: _jsx(LabelTextComponent, {\n            text: \"Ver todos\",\n            size: 15,\n            color: GlobalVars.textGrayColor\n          })\n        })]\n      })]\n    })\n  });\n}","map":{"version":3,"names":["React","useNavigation","GET_ALLS_PRODUCTS_CATEGORY","GET_ALLS_PRODUCTS","GET_ALLS_PRODUCTS_ENTREPRENEUR","GET_10_STAR_PRODUCTS_ENTREPRENEUR","shuffleArray","distancesUtil","LabelTextComponent","ProductCard","GlobalVars","Styles","styles","AnimatedScrollView","Animated","createAnimatedComponent","ScrollView","CATEGORY_ALLS","ProductsGrid","jwt","selectedCategory","entrepreneur","justFeatures","isMyShop","allActive","filterText","showTitle","title","activeNears","gps","isSpacing","navigation","useState","result","setResult","resultfilter","setResultfilter","loading","setLoading","empty","setEmpty","nearResults","setNearResults","useEffect","isMount","getProducts","isMountRes","length","SearchFilter","searchWaiting","clearTimeout","setTimeout","recoverNearbyPlaces","isMounSearch","res","textSearch","newData","filter","item","itemData","attributes","product","toUpperCase","textData","indexOf","arrTmp","Promise","all","map","element","i","calculateDistances","entrepreneurship","data","distanceBetween","distanceMax","filtered","e","newShuffleArr","cards","ResultsNearToSearch","rootView","viewContainer","alignSelf","marginVertical","orange","stylesCarousel","contentCarousel","paddingHorizontal","textGrayColor","spacingSections","wrapGrid","viewAll","navigate","shopID"],"sources":["/Users/andresfelipepinillameneses/Documents/John 2/front/src/components/organisms/ProductsGrid/index.js"],"sourcesContent":["import * as React from \"react\";\nimport {\n  View,\n  Animated,\n  ScrollView,\n  TouchableOpacity,\n  ActivityIndicator,\n} from \"react-native\";\n\nimport { useNavigation } from \"@react-navigation/native\";\n\nimport {\n  GET_ALLS_PRODUCTS_CATEGORY,\n  GET_ALLS_PRODUCTS,\n} from \"../../../mock/productsByCategory\";\nimport { GET_ALLS_PRODUCTS_ENTREPRENEUR } from \"../../../mock/productsByEntrepreneur\";\nimport { GET_10_STAR_PRODUCTS_ENTREPRENEUR } from \"../../../mock/productsByEntrepreneurFeatured\";\n\nimport { shuffleArray } from \"../../../helpers/shuffleArr\";\nimport distancesUtil from \"../../../utils/calculateGPSdistances\";\n\n/** Import Componentes Custom */\nimport LabelTextComponent from \"../../atoms/LabelText\";\nimport ProductCard from \"../../molecules/ProductCard\";\n\n/** Import Global Variables */\nimport GlobalVars from \"../../../global/globalVars\";\n\n/** Import Styles for this Screen */\nimport Styles from \"./style\";\n\nconst styles = Styles;\nconst AnimatedScrollView = Animated.createAnimatedComponent(ScrollView);\n\nconst CATEGORY_ALLS = 9999999;\n\nexport default function ProductsGrid({\n  jwt = null,\n  selectedCategory = null,\n  entrepreneur = null,\n  justFeatures = false,\n  isMyShop = false,\n  allActive = false,\n  filterText = \"\",\n  showTitle = false,\n  title = \"\",\n  activeNears = false,\n  gps = null,\n  isSpacing = false,\n}) {\n  const navigation = useNavigation();\n\n  const [result, setResult] = React.useState([]);\n  const [resultfilter, setResultfilter] = React.useState([]);\n  const [loading, setLoading] = React.useState(false);\n  const [empty, setEmpty] = React.useState(false);\n\n  const [nearResults, setNearResults] = React.useState([]);\n\n  React.useEffect(() => {}, []);\n\n  React.useEffect(() => {\n    let isMount = true;\n\n    if (isMount) {\n      /** Get products */\n      getProducts();\n    }\n\n    return () => {\n      isMount = false;\n    };\n  }, [selectedCategory, entrepreneur]);\n\n  React.useEffect(() => {\n    let isMountRes = true;\n\n    if (isMountRes) {\n      if (result?.length) {\n        SearchFilter(filterText);\n\n        // near places\n        if (activeNears) {\n          if (searchWaiting) clearTimeout(searchWaiting);\n          let searchWaiting = setTimeout(() => {\n            searchWaiting = null;\n            recoverNearbyPlaces();\n          }, 1500);\n        }\n      } else {\n        setResultfilter([]);\n      }\n    }\n\n    return () => {\n      isMountRes = false;\n    };\n  }, [result]);\n\n  React.useEffect(() => {\n    let isMounSearch = true;\n\n    if (isMounSearch) {\n      SearchFilter(filterText);\n    }\n\n    return () => {\n      isMounSearch = false;\n    };\n  }, [filterText]);\n\n  const getProducts = async () => {\n    await setLoading(true);\n    if (entrepreneur && justFeatures) {\n      const res = await GET_10_STAR_PRODUCTS_ENTREPRENEUR(entrepreneur, jwt);\n      if (res && res.length) {\n        setLoading(false);\n        setResult(res);\n        setEmpty(false);\n      } else {\n        setLoading(false);\n        setEmpty(true);\n        setResult([]);\n      }\n    } else if (entrepreneur && !justFeatures) {\n      const res = await GET_ALLS_PRODUCTS_ENTREPRENEUR(entrepreneur, jwt);\n\n      if (res && res.length) {\n        setLoading(false);\n        setResult(res);\n        setEmpty(false);\n      } else {\n        setLoading(false);\n        setEmpty(true);\n        setResult([]);\n      }\n    } else if (selectedCategory) {\n      const res =\n        selectedCategory === CATEGORY_ALLS\n          ? await GET_ALLS_PRODUCTS(jwt)\n          : await GET_ALLS_PRODUCTS_CATEGORY(selectedCategory, jwt);\n\n      if (res && res.length) {\n        setLoading(false);\n        setResult(res);\n        setEmpty(false);\n      } else {\n        setLoading(false);\n        setEmpty(true);\n        setResult([]);\n      }\n    } else {\n      const res = await GET_ALLS_PRODUCTS_ENTREPRENEUR(entrepreneur, jwt);\n\n      if (res && res.length) {\n        setLoading(false);\n        setResult(res);\n        setEmpty(false);\n      } else {\n        setLoading(false);\n        setEmpty(true);\n        setResult([]);\n      }\n    }\n  };\n\n  const SearchFilter = (textSearch) => {\n    if (textSearch) {\n      const newData = result.filter(function (item) {\n        const itemData = item?.attributes?.product.toUpperCase();\n        const textData = textSearch.toUpperCase();\n        return itemData.indexOf(textData) > -1;\n      });\n\n      setResultfilter(newData);\n    } else {\n      setResultfilter(result);\n    }\n  };\n\n  const recoverNearbyPlaces = async () => {\n    await setNearResults([]);\n\n    const arrTmp = await Promise.all(\n      result.map(async (element, i) => {\n        const res = await distancesUtil.calculateDistances(\n          gps,\n          element?.attributes?.entrepreneurship?.data?.attributes?.gps\n        );\n\n        const distanceBetween = res / 1000;\n\n        if (distancesUtil.distanceMax >= distanceBetween) {\n          // console.log(i, distanceBetween, distancesUtil.distanceMax);\n          return element;\n        } else {\n          null;\n        }\n      })\n    );\n\n    const filtered = arrTmp.filter((e) => e && e !== null);\n\n    const newShuffleArr = shuffleArray(filtered);\n\n    await setNearResults(newShuffleArr);\n  };\n\n  let cards = resultfilter.map((item, i) => {\n    if (isMyShop) {\n      return <ProductCard key={`product_item_${i}`} item={item} isMyShop />;\n    } else {\n      return <ProductCard key={`product_item_${i}`} item={item} />;\n    }\n  });\n\n  let ResultsNearToSearch = nearResults.map((item, i) => {\n    if (i > 3)\n      return <ProductCard key={`product_item_near_${i}`} item={null} />;\n\n    if (isMyShop) {\n      return (\n        <ProductCard key={`product_item_near_${i}`} item={item} isMyShop />\n      );\n    } else {\n      return <ProductCard key={`product_item_near_${i}`} item={item} />;\n    }\n  });\n\n  return (\n    <View style={styles.rootView}>\n      <View style={styles.viewContainer}>\n        {loading && (\n          <ActivityIndicator\n            style={{ alignSelf: \"center\", marginVertical: 30 }}\n            size=\"large\"\n            color={GlobalVars.orange}\n          />\n        )}\n        <AnimatedScrollView\n          style={styles.stylesCarousel}\n          contentContainerStyle={[\n            styles.contentCarousel,\n            { paddingHorizontal: isSpacing ? 10 : 0 },\n          ]}\n        >\n          {!loading && empty && (\n            <LabelTextComponent\n              text=\"Por el momento esta lista está vacía.\"\n              color={GlobalVars.textGrayColor}\n              size={16}\n            />\n          )}\n\n          {(!loading && !empty && nearResults.length && (\n            <>\n              <LabelTextComponent\n                text=\"Cerca de tí\"\n                color={GlobalVars.textGrayColor}\n                size={16}\n              />\n              <View style={styles.spacingSections} />\n              <View style={styles.wrapGrid}>\n                {(!loading &&\n                  !empty &&\n                  nearResults.length &&\n                  ResultsNearToSearch) || <></>}\n              </View>\n              <View style={styles.spacingSections} />\n            </>\n          )) || <></>}\n\n          {(!loading && !empty && showTitle && (\n            <>\n              <LabelTextComponent\n                text={title}\n                color={GlobalVars.textGrayColor}\n                size={16}\n              />\n              <View style={styles.spacingSections} />\n            </>\n          )) || <></>}\n          <View style={styles.wrapGrid}>\n            {(!loading && !empty && cards) || <></>}\n          </View>\n\n          {!loading && !empty && !allActive && (\n            <TouchableOpacity\n              style={styles.viewAll}\n              onPress={() =>\n                navigation.navigate(\"Products\", { shopID: entrepreneur })\n              }\n            >\n              <LabelTextComponent\n                text=\"Ver todos\"\n                size={15}\n                color={GlobalVars.textGrayColor}\n              />\n            </TouchableOpacity>\n          )}\n        </AnimatedScrollView>\n      </View>\n    </View>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}