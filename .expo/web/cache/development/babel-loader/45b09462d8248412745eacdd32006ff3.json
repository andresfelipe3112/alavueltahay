{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from \"react\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { AntDesign } from \"@expo/vector-icons\";\nimport GlobalVars from \"../../../global/globalVars\";\nimport useModal from \"../../../utils/useModal\";\nimport oAuth from \"../../../helpers/oAuth\";\nimport Loading from \"../../atoms/Loading\";\nimport TitleComponent from \"../../atoms/Titles\";\nimport LabelTextComponent from \"../../atoms/LabelText\";\nimport InputEntry from \"../../molecules/InputEntry\";\nimport ButtonComponent from \"../../atoms/ButtonComponent\";\nimport ModalAlert from \"../ModalAlert\";\nimport styles from \"./styles\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar ModalResetPass = function ModalResetPass(props) {\n  var openModal = props.openModal,\n      onHelp = props.onHelp;\n\n  var _useModal = useModal(),\n      isShowingAlert = _useModal.isShowing,\n      toggleAlert = _useModal.toggle;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      textAlert = _useState6[0],\n      setTextAlert = _useState6[1];\n\n  var validateEmail = function validateEmail(email) {\n    if (!email.length) return false;\n    return String(email.replace(/\\s/g, \"\")).toLowerCase().match(/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\n  };\n\n  var validateData = function () {\n    var _ref = _asyncToGenerator(function* () {\n      setLoading(true);\n\n      if (!validateEmail(email)) {\n        setTimeout(function () {\n          setLoading(false);\n          setTextAlert(\"Correo incorrecto\");\n          toggleAlert();\n        }, 1500);\n        return;\n      }\n\n      var res = yield sendData();\n\n      if (!res) {\n        setTimeout(function () {\n          setLoading(false);\n          setTextAlert(\"Un error ha ocurrido.\");\n          toggleAlert();\n        }, 1500);\n      } else {\n        setLoading(false);\n        setTextAlert(\"Se han enviado las instrucciones a tu correo.\");\n        setEmail(\"\");\n        toggleAlert();\n      }\n    });\n\n    return function validateData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var sendData = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var data = {\n        type: \"2\",\n        email: email\n      };\n      var res = yield oAuth.RecoverPass(data);\n\n      if (res && (res == null ? void 0 : res.message) === \"done\") {\n        setLoading(false);\n        setTimeout(function () {\n          toggleAlert();\n          setTimeout(function () {\n            onHelp();\n          }, 500);\n        }, 2500);\n        return true;\n      }\n\n      setLoading(false);\n      return false;\n    });\n\n    return function sendData() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return _jsx(Modal, {\n    animationType: \"slide\",\n    transparent: true,\n    visible: openModal,\n    children: _jsxs(View, {\n      style: styles.view,\n      children: [_jsx(ModalAlert, {\n        text: textAlert,\n        openModal: isShowingAlert,\n        onHelp: toggleAlert\n      }), loading && _jsx(Loading, {\n        size: \"small\",\n        color: GlobalVars.white\n      }), !loading && _jsxs(View, {\n        style: styles.container,\n        children: [_jsx(TouchableOpacity, {\n          style: {\n            position: \"absolute\",\n            top: 15,\n            right: 15\n          },\n          onPress: onHelp,\n          children: _jsx(AntDesign, {\n            name: \"closecircleo\",\n            size: 24,\n            color: GlobalVars.white\n          })\n        }), _jsx(TitleComponent, {\n          title: \"\\xBFOlvidaste tu contrase\\xF1a?\",\n          color: GlobalVars.whiteLight,\n          size: 20,\n          weight: \"800\",\n          customStyles: {\n            textAlign: \"center\"\n          }\n        }), _jsx(LabelTextComponent, {\n          size: 15,\n          color: GlobalVars.white,\n          text: \"Deja abajo tu correo para crear una nueva contrase\\xF1a\"\n        }), _jsx(View, {\n          style: styles.centerContent,\n          children: _jsx(InputEntry, {\n            label: \"Ingrese su correo\",\n            textvariable: email,\n            setValue: function setValue(val) {\n              return setEmail(val);\n            },\n            colorPlaceholder: \"rgba(255, 255, 255, 0.5)\"\n          })\n        }), !loading ? _jsx(ButtonComponent, {\n          text: \"Restaurar contrase\\xF1a\",\n          color: GlobalVars.white,\n          textColor: GlobalVars.firstColor,\n          customStyleBtn: {\n            width: \"80%\",\n            alignSelf: \"center\"\n          },\n          Action: function Action() {\n            return validateData();\n          }\n        }) : _jsx(Loading, {\n          size: \"small\",\n          color: GlobalVars.white\n        })]\n      })]\n    })\n  });\n};\n\nexport default ModalResetPass;","map":{"version":3,"names":["React","useState","AntDesign","GlobalVars","useModal","oAuth","Loading","TitleComponent","LabelTextComponent","InputEntry","ButtonComponent","ModalAlert","styles","ModalResetPass","props","openModal","onHelp","isShowingAlert","isShowing","toggleAlert","toggle","email","setEmail","loading","setLoading","textAlert","setTextAlert","validateEmail","length","String","replace","toLowerCase","match","validateData","setTimeout","res","sendData","data","type","RecoverPass","message","view","white","container","position","top","right","whiteLight","textAlign","centerContent","val","firstColor","width","alignSelf"],"sources":["/Users/andresfelipepinillameneses/Documents/John 2/front/src/components/templates/ModalRestorePass/index.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Modal, View, TouchableOpacity, Alert } from \"react-native\";\n\nimport { AntDesign } from \"@expo/vector-icons\";\n\nimport GlobalVars from \"../../../global/globalVars\";\n\nimport useModal from \"../../../utils/useModal\";\n\nimport oAuth from \"../../../helpers/oAuth\";\n\nimport Loading from \"../../atoms/Loading\";\nimport TitleComponent from \"../../atoms/Titles\";\nimport LabelTextComponent from \"../../atoms/LabelText\";\nimport InputEntry from \"../../molecules/InputEntry\";\nimport ButtonComponent from \"../../atoms/ButtonComponent\";\nimport ModalAlert from \"../ModalAlert\";\n\nimport styles from \"./styles\";\n\nconst ModalResetPass = (props) => {\n  const { openModal, onHelp } = props;\n\n  const { isShowing: isShowingAlert, toggle: toggleAlert } = useModal();\n\n  const [email, setEmail] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [textAlert, setTextAlert] = useState(\"\");\n\n  const validateEmail = (email) => {\n    if (!email.length) return false;\n    return String(email.replace(/\\s/g, \"\"))\n      .toLowerCase()\n      .match(\n        /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n      );\n  };\n\n  const validateData = async () => {\n    setLoading(true);\n    if (!validateEmail(email)) {\n      setTimeout(() => {\n        setLoading(false);\n        setTextAlert(\"Correo incorrecto\");\n        toggleAlert();\n      }, 1500);\n      return;\n    }\n\n    const res = await sendData();\n    if (!res) {\n      setTimeout(() => {\n        setLoading(false);\n        setTextAlert(\"Un error ha ocurrido.\");\n        toggleAlert();\n      }, 1500);\n    } else {\n      setLoading(false);\n      setTextAlert(\"Se han enviado las instrucciones a tu correo.\");\n      setEmail(\"\");\n      toggleAlert();\n    }\n  };\n\n  const sendData = async () => {\n    let data = {\n      type: \"2\",\n      email,\n    };\n    const res = await oAuth.RecoverPass(data);\n\n    if (res && res?.message === \"done\") {\n      setLoading(false);\n      setTimeout(() => {\n        toggleAlert();\n        setTimeout(() => {\n          onHelp();\n        }, 500);\n      }, 2500);\n      return true;\n    }\n\n    setLoading(false);\n    return false;\n  };\n\n  return (\n    <Modal animationType=\"slide\" transparent={true} visible={openModal}>\n      <View style={styles.view}>\n        <ModalAlert\n          text={textAlert}\n          openModal={isShowingAlert}\n          onHelp={toggleAlert}\n        />\n        {loading && <Loading size=\"small\" color={GlobalVars.white} />}\n        {!loading && (\n          <View style={styles.container}>\n            <TouchableOpacity\n              style={{ position: \"absolute\", top: 15, right: 15 }}\n              onPress={onHelp}\n            >\n              <AntDesign\n                name=\"closecircleo\"\n                size={24}\n                color={GlobalVars.white}\n              />\n            </TouchableOpacity>\n\n            <TitleComponent\n              title=\"¿Olvidaste tu contraseña?\"\n              color={GlobalVars.whiteLight}\n              size={20}\n              weight=\"800\"\n              customStyles={{ textAlign: \"center\" }}\n            />\n\n            <LabelTextComponent\n              size={15}\n              color={GlobalVars.white}\n              text=\"Deja abajo tu correo para crear una nueva contraseña\"\n            />\n\n            <View style={styles.centerContent}>\n              <InputEntry\n                label=\"Ingrese su correo\"\n                textvariable={email}\n                setValue={(val) => setEmail(val)}\n                colorPlaceholder=\"rgba(255, 255, 255, 0.5)\"\n              />\n            </View>\n            {!loading ? (\n              <ButtonComponent\n                text=\"Restaurar contraseña\"\n                color={GlobalVars.white}\n                textColor={GlobalVars.firstColor}\n                customStyleBtn={{\n                  width: \"80%\",\n                  alignSelf: \"center\",\n                }}\n                Action={() => validateData()}\n              />\n            ) : (\n              <Loading size=\"small\" color={GlobalVars.white} />\n            )}\n          </View>\n        )}\n      </View>\n    </Modal>\n  );\n};\n\nexport default ModalResetPass;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}